<!-- sidebar.xhtml -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">


    <!-- Redirect to login page if user is not logged in -->
    <h:outputScript rendered="#{loginBean.loggedInUser == null}">
        window.location = '#{facesContext.externalContext.requestContextPath}/pages/auth/login.xhtml';
    </h:outputScript>

    <div class="sidebar">
        <h:panelGroup styleClass="flex column pad1">
            <h3>#{loginBean.loggedInUser.firstname} #{loginBean.loggedInUser.lastname}</h3>
            <p:outputLabel value="@#{loginBean.loggedInUser.username}"/>
        </h:panelGroup>

        <p:tieredMenu styleClass="no-border fillW">
            <p:menuitem value="Dashboard" outcome="/pages/adminpages/admin-dashboard" icon="pi pi-home"/>
            <p:menuitem value="Roles" outcome="/pages/adminpages/admin-roles" icon="pi pi-briefcase" rendered="#{checkPermission.hasPermission('VIEW_ROLES')}"/>
            <p:menuitem value="Employees" outcome="/pages/adminpages/admin-employees" icon="pi pi-users" rendered="#{checkPermission.hasPermission('VIEW_EMPLOYEES')}"/>
            <p:submenu label="Budgetlines" icon="pi pi-chart-bar" rendered="#{checkPermission.hasPermission('VIEW_BUDGETLINES')}">
                <p:menuitem value="Categories" outcome="/pages/adminpages/admin-budgetline-categories" icon="pi pi-filter" rendered="#{checkPermission.hasPermission('VIEW_EMPLOYEES')}"/>
                <p:menuitem value="List" outcome="/pages/adminpages/admin-budgetlines" icon="pi pi-bars"/>
            </p:submenu>
            <p:menuitem value="My Requisitions" outcome="/pages/adminpages/admin-create-requisition" icon="pi pi-plus-circle" rendered="#{checkPermission.hasPermission('MAKE_REQUISITION')}"/>
            <p:menuitem value="Requisitions" outcome="/pages/adminpages/admin-requisitions" icon="pi pi-file" rendered="#{checkPermission.hasPermission('VIEW_REQUISITIONS')}"/>

            <h:panelGroup class="flex column">
            </h:panelGroup>
            <p:menuitem value="Accountability" outcome="/pages/adminpages/accountability" icon="pi pi-file-edit" rendered="#{checkPermission.hasPermission('VIEW_ACCOUNTABILITY')}"/>
            <p:menuitem value="Settings" outcome="/pages/adminpages/admin-settings" icon="pi pi-cog"/>
            <p:menuitem value="Logout" action="#{loginBean.logoutUser}" icon="pi pi-sign-out"/>
        </p:tieredMenu>
    </div>
</ui:composition>